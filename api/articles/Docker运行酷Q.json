{"title":"Docker运行酷Q","slug":"Docker运行酷Q","date":"2020-01-29T10:19:46.000Z","updated":"2020-03-05T11:41:54.809Z","comments":true,"path":"api/articles/Docker运行酷Q.json","excerpt":null,"covers":null,"content":"<p>CentOS运行酷Q需要<a href=\" https://www.docker.com/ \" target=\"_blank\" rel=\"noopener\">docker</a>的加持，什么是docker?</p>\n<p> Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。 </p>\n<ol>\n<li>卸载Docker旧版本(如果存在的情况下)</li>\n</ol>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">yum -y remove docker docker-engine docker-common docker-selinux<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ol start=\"2\">\n<li>安装依赖软件包</li>\n</ol>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">sudo yum install -y yum-utils device-mapper-persistent-data  lvm2<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ol start=\"3\">\n<li>安装Docker</li>\n</ol>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">sudo yum update\nsudo yum install docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<ol start=\"4\">\n<li>启动Docker</li>\n</ol>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">sudo systemctl start docker\nsudo enable docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<ol start=\"5\">\n<li>验证是否安装成功</li>\n</ol>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">docker --version<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ol start=\"6\">\n<li>阿里云镜像加速&lt;<strong>注意,这点非常重要,不用加速,你可能pull一个coolq的镜像需要几个小时</strong>&gt;</li>\n</ol>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">sudo mkdir -p /etc/docker\nvim /etc/docker/daemon.json\nsudo tee /etc/docker/daemon.json <<-'EOF'\n{\n  \"registry-mirrors\": [\"https://dttr1kms.mirror.aliyuncs.com\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><em>卸载docker</em></p>\n<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">systemctl stop docker\nyum -y remove docker-ce\nrm -rf /var/lib/docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>那么接下来我们就来在CentOS的服务器上运行酷Q</p>\n<ul>\n<li>开启Docker<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">systemctl start docker <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</li>\n</ul>\n<ol>\n<li>拉取coolq镜像<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">docker pull coolq/wine-coolq<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</li>\n<li>然后创建一个存放数据的文件夹<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">mkdir /root/coolq-data<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n</li>\n<li>运行酷Q<pre class=\"line-numbers language-shell\"><code class=\"language-shell\">docker run --name=coolq -d -p 8080:9000 -v /root/coolq-data:/home/user/coolq -e VNC_PASSWD=123456 -e COOLQ_ACCOUNT=123456 coolq/wine-coolq<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n然后打开浏览器输入你的  IP:8080   就可以访问VNC了，密码是上面设置的123456</li>\n</ol>\n<p><strong>注意，此时你可能通过浏览器输入你的IP加端口不能访问到VNC界面，那是因为还没开放相应，记得去服务器后台设置安全组</strong></p>\n<p>更多有趣的酷Q插件，请访问<a href=\"https://cqp.cc/b/app\" target=\"_blank\" rel=\"noopener\">cpp.cc/b/cpp</a></p>\n<script>\n        document.querySelectorAll('.github-emoji')\n          .forEach(el => {\n            if (!el.dataset.src) { return; }\n            const img = document.createElement('img');\n            img.style = 'display:none !important;';\n            img.src = el.dataset.src;\n            img.addEventListener('error', () => {\n              img.remove();\n              el.style.color = 'inherit';\n              el.style.backgroundImage = 'none';\n              el.style.background = 'none';\n            });\n            img.addEventListener('load', () => {\n              img.remove();\n            });\n            document.body.appendChild(img);\n          });\n      </script>","more":"<p>CentOS运行酷Q需要<a href=\" https://www.docker.com/ \" target=\"_blank\" rel=\"noopener\">docker</a>的加持，什么是docker?</p>\n<p> Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中，然后发布到任何流行的 Linux或Windows 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口。 </p>\n<ol>\n<li>卸载Docker旧版本(如果存在的情况下)</li>\n</ol>\n<pre><code class=\"shell\">yum -y remove docker docker-engine docker-common docker-selinux</code></pre>\n<ol start=\"2\">\n<li>安装依赖软件包</li>\n</ol>\n<pre><code class=\"shell\">sudo yum install -y yum-utils device-mapper-persistent-data  lvm2</code></pre>\n<ol start=\"3\">\n<li>安装Docker</li>\n</ol>\n<pre><code class=\"shell\">sudo yum update\nsudo yum install docker</code></pre>\n<ol start=\"4\">\n<li>启动Docker</li>\n</ol>\n<pre><code class=\"shell\">sudo systemctl start docker\nsudo enable docker</code></pre>\n<ol start=\"5\">\n<li>验证是否安装成功</li>\n</ol>\n<pre><code class=\"shell\">docker --version</code></pre>\n<ol start=\"6\">\n<li>阿里云镜像加速&lt;<strong>注意,这点非常重要,不用加速,你可能pull一个coolq的镜像需要几个小时</strong>&gt;</li>\n</ol>\n<pre><code class=\"shell\">sudo mkdir -p /etc/docker\nvim /etc/docker/daemon.json\nsudo tee /etc/docker/daemon.json &lt;&lt;-&#39;EOF&#39;\n{\n  &quot;registry-mirrors&quot;: [&quot;https://dttr1kms.mirror.aliyuncs.com&quot;]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker</code></pre>\n<p><em>卸载docker</em></p>\n<pre><code class=\"shell\">systemctl stop docker\nyum -y remove docker-ce\nrm -rf /var/lib/docker</code></pre>\n<p>那么接下来我们就来在CentOS的服务器上运行酷Q</p>\n<ul>\n<li>开启Docker<pre><code class=\"shell\">systemctl start docker </code></pre>\n</li>\n</ul>\n<ol>\n<li>拉取coolq镜像<pre><code class=\"shell\">docker pull coolq/wine-coolq</code></pre>\n</li>\n<li>然后创建一个存放数据的文件夹<pre><code class=\"shell\">mkdir /root/coolq-data</code></pre>\n</li>\n<li>运行酷Q<pre><code class=\"shell\">docker run --name=coolq -d -p 8080:9000 -v /root/coolq-data:/home/user/coolq -e VNC_PASSWD=123456 -e COOLQ_ACCOUNT=123456 coolq/wine-coolq</code></pre>\n然后打开浏览器输入你的  IP:8080   就可以访问VNC了，密码是上面设置的123456</li>\n</ol>\n<p><strong>注意，此时你可能通过浏览器输入你的IP加端口不能访问到VNC界面，那是因为还没开放相应，记得去服务器后台设置安全组</strong></p>\n<p>更多有趣的酷Q插件，请访问<a href=\"https://cqp.cc/b/app\" target=\"_blank\" rel=\"noopener\">cpp.cc/b/cpp</a></p>\n","categories":[{"name":"Docker","path":"api/categories/Docker.json"}],"tags":[{"name":"Docker","path":"api/tags/Docker.json"}]}